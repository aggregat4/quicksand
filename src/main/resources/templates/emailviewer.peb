<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>E-Mail Viewer - Quicksand</title>
    <link rel="stylesheet" href="/css/main.css">
</head>
<body class="emailviewer">
    <main>
        <div id="emailsubject">
            <h1>{{ email.header.subject }}</h1>
        </div>
        <div id="emailmetadata">
            metadata: from, to, date
        </div>
        <div id="emailactions">
            actions
        </div>
        <div id="emailimages">
            images
        </div>
        {# TODO: should this be inline raw HMTL or another iframe? #}
        {% if email.plainText %}
        {# TODO: figure out plain text display (wrapping, etc) #}
            <pre id="emailbody">{{  email.body | raw }}</pre>
        {% else %}
            <iframe
                    id="emailbody"
                    src="/accounts/{{ accountId }}/folders/{{ folderId }}/emails/{{ email.header.id }}/body"
                    sandbox="allow-same-origin"
            ></iframe>
        {% endif %}
        <div id="emailattachments">
            {% for attachment in email.attachments %}
                <a class="attachment">{{ attachment.name }}, {{ attachment.sizeInBytes }}</a>
            {% endfor %}
        </div>
        <div id="emailbottomactions">
            some actions
        </div>
    </main>

    <script src="/js/messagepreview.js"></script>
</body>
</html>
